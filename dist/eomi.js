function e(e){return String.fromCharCode(588*e[0]+28*e[1]+e[2]+44032)}function t(e){var t=e.charCodeAt(e.length-1)-44032;return[t/588|0,t%588/28|0,t%28]}function i(e){var i=t(e)[2];return 0===i?"":"ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ"[i-1]}function r(e){return"가"<=e[0]&&e[0]<="힣"}var n,o=function(){function r(e,t,r){this.hada=e.slice(0,-1),this.batchim=i(this.hada),this.hae=t||this.recoverHae(),this.hani=r?r.slice(0,-1):this.recoverHani(),this.hamyeon="ㄹ"===this.batchim?this.hada:this.hani}var n=r.prototype;return n._=function(e,t){if(e instanceof h){if(null!=t)throw Error("If the first argument is a proper Eomi, only one argument should be given.")}else e=new h(e,t);return e.after(this)},n.recoverHae=function(){var i=t(this.hada);if(!this.batchim){if(0===i[1]||4===i[1])return this.hada;if(18===i[1])return i[1]=4,this.hada.slice(0,-1)+e(i)}return this.hada+(0===i[1]||8===i[1]?"아":"어")},n.recoverHani=function(){var i=t(this.hada);if("ㄹ"===this.batchim)return i[2]=0,this.hada.slice(0,-1)+e(i);var r=this.hae.slice(-1);return-1!=="아어".indexOf(r)?this.hae.slice(0,-1)+(this.batchim&&"으"):-1!=="와워".indexOf(r)?this.hae.slice(0,-1)+"우":"ㅎ"===this.batchim?(i[2]=0,this.hada.slice(0,-1)+e(i)):this.hada},n.valueOf=function(){return this.hada+"다"},r}();!function(e){e.DIRECT="",e.A_EO="(아/어)",e.EU="(으)"}(n||(n={}));var a=function(){function o(e){var t=new Error("Cannot parse given string "+e+" to EomiUnit");"-"===e[0]&&(e=e.slice(1));var o=e.match(/^[(]?([아-앟어-엏])(?:[/]([아-앟어-엏]))?[)]?(.*)$/),a=e.match(/^[(]?([으-읗])[)]?(.*)$/),h=e.match(/^([ㄱ-ㅎ].*)$/);if(null!==o){var s=o[1],u=o[2],f=o[3];if(u&&i(s)!==i(u))throw t;this.body=i(s)+f,this.eomiType=n.A_EO}else if(null!==a){var c=a[2];this.body=i(a[1])+c,this.eomiType=n.EU}else null!==h?(this.body=h[1],this.eomiType=n.EU):(this.body=e,this.eomiType=n.DIRECT);if(r(this.body)){var l=(this.body.charCodeAt(0)-44032)/588|0;this.dropRieul=-1!==[2,9,11].indexOf(l)}else this.dropRieul=-1!=="ㄴㄹㅂ".indexOf(this.body[0])}var a=o.prototype;return a.after=function(o){var a=o.hada;return this.eomiType===n.A_EO?a=o.hae:this.eomiType===n.EU?a=this.dropRieul?o.hani:o.hamyeon:this.dropRieul&&"ㄹ"===o.batchim&&(a=o.hani),function(n,o){var a=new Error("Cannot concatenate '"+n+"' and '"+o+"'");if(!n||!o||r(o))return n+o;var h=[,,"ㄱㄱ","ㄱㅅ",,"ㄴㅈ","ㄴㅎ",,,"ㄹㄱ","ㄹㅁ","ㄹㅂ","ㄹㅅ","ㄹㅌ","ㄹㅍ","ㄹㅎ",,,"ㅂㅅ",,"ㅅㅅ"].indexOf(i(n)+o[0]);if(-1===h){if(i(n))throw a;if(0===(h="ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ".indexOf(o[0])+1))throw a}var s=t(n);return s[2]=h,n.slice(0,-1)+e(s)+o.slice(1)}(a,this.body)},a.valueOf=function(){return"-"+this.eomiType+this.body},o}(),h=function(){function e(e,t){"string"==typeof e&&(e=new a(e)),"string"==typeof t&&(t=new a(t)),this.eomi=e,this.eomiAfterBatchim=t}var t=e.prototype;return t.after=function(e){var t=this.eomi;return null!=this.eomiAfterBatchim&&e.batchim&&("ㄹ"===e.batchim&&t.dropRieul||(t=this.eomiAfterBatchim)),t.after(e)},t.valueOf=function(){var e=this.eomiAfterBatchim;return this.eomi+(null!=e?"/"+e:"")},e}();function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function u(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}var f=function(){function e(){this.root={}}var t=e.prototype;return t.get=function(e){for(var t,i=this.root,r=u(e);!(t=r()).done;){if(!i.children)return[];var n=i.children.get(t.value);if(!n)return[];i=n}return i.values||[]},t.set=function(e,t){for(var i,r=this.root,n=u(e);!(i=n()).done;){var o=i.value;r.children||(r.children=new Map);var a=r.children.get(o);a||r.children.set(o,a={}),r=a}r.values?r.values.push(t):r.values=[t]},t.allPrefixes=function(e){for(var t=[],i=this.root,r=0;r<e.length&&i.children;r++){var n=i.children.get(e[r]);if(!n)break;n.values&&n.values.length&&t.push([n.values,e.slice(r+1)]),i=n}return t},e}();function c(e){if(e<"ㄱ"||"ㅎ"<e)return e;var t=["ㄸ","ㅃ","ㅉ"];if(-1!==t.indexOf(e[0]))return e;var i=e.charCodeAt(0)-"ㄱ".charCodeAt(0);return t.forEach(function(t){return i-=e>t?1:0}),String.fromCharCode(i+4520)}function l(e){return e.split("").map(c).join("").normalize("NFD")}exports.Analyzer=function(){function e(e,t){var i=this;this.yongeons=new f,e.forEach(function(e){return i.addYongeon(e)}),this.eomis=new Map,t.forEach(function(e){return i.addEomi(e)})}var t=e.prototype;return t.addYongeon=function(e){var t="ㄹ"!==e.batchim&&void 0;this.yongeons.set(l(e.hada),{yongeon:e,eomiType:"",dropRieul:t}),this.yongeons.set(l(e.hae),{yongeon:e,eomiType:"(아/어)"}),this.yongeons.set(l(e.hamyeon),{yongeon:e,eomiType:"(으)",dropRieul:t}),"ㄹ"===e.batchim&&(this.yongeons.set(l(e.hani),{yongeon:e,eomiType:"",dropRieul:!0}),this.yongeons.set(l(e.hani),{yongeon:e,eomiType:"(으)",dropRieul:!0}))},t.addEomi=function(e){this.addEomiUnit(l(e.eomi.body),{eomi:e,eomiType:e.eomi.eomiType,dropRieul:e.eomi.dropRieul}),e.eomiAfterBatchim&&this.addEomiUnit(l(e.eomiAfterBatchim.body),{eomi:e,eomiType:e.eomiAfterBatchim.eomiType,dropRieul:e.eomiAfterBatchim.dropRieul})},t.addEomiUnit=function(e,t){var i=this.eomis.get(e);i?i.push(t):this.eomis.set(e,[t])},t.analyze=function(e){for(var t,i=[],r=u(this.yongeons.allPrefixes(l(e)));!(t=r()).done;)for(var n,o=t.value,a=o[0],h=u(this.eomis.get(o[1])||[]);!(n=h()).done;)for(var s,f=n.value,c=f.eomi,d=f.eomiType,m=f.dropRieul,v=u(a);!(s=v()).done;){var p=s.value;d===p.eomiType&&(null!=p.dropRieul&&m!==p.dropRieul||i.push([p.yongeon,c]))}return i},e}(),exports.E=h,exports.Eomi=h,exports.V=o,exports.Yongeon=o;
//# sourceMappingURL=eomi.js.map
