!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).eomiJs={})}(this,function(e){function t(e){return String.fromCharCode(588*e[0]+28*e[1]+e[2]+44032)}function i(e){var t=e.charCodeAt(e.length-1)-44032;return[t/588|0,t%588/28|0,t%28]}function n(e){var t=i(e)[2];return 0===t?"":"ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ"[t-1]}function r(e){return"가"<=e[0]&&e[0]<="힣"}var o,a=function(){function e(e,t,i){this.hada=e.slice(0,-1),this.batchim=n(this.hada),this.hae=t||this.recoverHae(),this.hani=i?i.slice(0,-1):this.recoverHani(),this.hamyeon="ㄹ"===this.batchim?this.hada:this.hani}var r=e.prototype;return r._=function(e,t){if(e instanceof s){if(null!=t)throw Error("If the first argument is a proper Eomi, only one argument should be given.")}else e=new s(e,t);return e.after(this)},r.recoverHae=function(){var e=i(this.hada);if(!this.batchim){if(0===e[1]||4===e[1])return this.hada;if(18===e[1])return e[1]=4,this.hada.slice(0,-1)+t(e)}return this.hada+(0===e[1]||8===e[1]?"아":"어")},r.recoverHani=function(){var e=i(this.hada);if("ㄹ"===this.batchim)return e[2]=0,this.hada.slice(0,-1)+t(e);var n=this.hae.slice(-1);return-1!=="아어".indexOf(n)?this.hae.slice(0,-1)+(this.batchim&&"으"):-1!=="와워".indexOf(n)?this.hae.slice(0,-1)+"우":"ㅎ"===this.batchim?(e[2]=0,this.hada.slice(0,-1)+t(e)):this.hada},r.valueOf=function(){return this.hada+"다"},e}();!function(e){e.DIRECT="",e.A_EO="(아/어)",e.EU="(으)"}(o||(o={}));var h=function(){function e(e){var t=new Error("Cannot parse given string "+e+" to EomiUnit");"-"===e[0]&&(e=e.slice(1));var i=e.match(/^[(]?([아-앟어-엏])(?:[/]([아-앟어-엏]))?[)]?(.*)$/),a=e.match(/^[(]?([으-읗])[)]?(.*)$/),h=e.match(/^([ㄱ-ㅎ].*)$/);if(null!==i){var s=i[1],u=i[2],f=i[3];if(u&&n(s)!==n(u))throw t;this.body=n(s)+f,this.eomiType=o.A_EO}else if(null!==a){var c=a[2];this.body=n(a[1])+c,this.eomiType=o.EU}else null!==h?(this.body=h[1],this.eomiType=o.EU):(this.body=e,this.eomiType=o.DIRECT);if(r(this.body)){var l=(this.body.charCodeAt(0)-44032)/588|0;this.dropRieul=-1!==[2,9,11].indexOf(l)}else this.dropRieul=-1!=="ㄴㄹㅂ".indexOf(this.body[0])}var a=e.prototype;return a.after=function(e){var a=e.hada;return this.eomiType===o.A_EO?a=e.hae:this.eomiType===o.EU?a=this.dropRieul?e.hani:e.hamyeon:this.dropRieul&&"ㄹ"===e.batchim&&(a=e.hani),function(e,o){var a=new Error("Cannot concatenate '"+e+"' and '"+o+"'");if(!e||!o||r(o))return e+o;var h=[,,"ㄱㄱ","ㄱㅅ",,"ㄴㅈ","ㄴㅎ",,,"ㄹㄱ","ㄹㅁ","ㄹㅂ","ㄹㅅ","ㄹㅌ","ㄹㅍ","ㄹㅎ",,,"ㅂㅅ",,"ㅅㅅ"].indexOf(n(e)+o[0]);if(-1===h){if(n(e))throw a;if(0===(h="ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ".indexOf(o[0])+1))throw a}var s=i(e);return s[2]=h,e.slice(0,-1)+t(s)+o.slice(1)}(a,this.body)},a.valueOf=function(){return"-"+this.eomiType+this.body},e}(),s=function(){function e(e,t){"string"==typeof e&&(e=new h(e)),"string"==typeof t&&(t=new h(t)),this.eomi=e,this.eomiAfterBatchim=t}var t=e.prototype;return t.after=function(e){var t=this.eomi;return null!=this.eomiAfterBatchim&&e.batchim&&("ㄹ"===e.batchim&&t.dropRieul||(t=this.eomiAfterBatchim)),t.after(e)},t.valueOf=function(){var e=this.eomiAfterBatchim;return this.eomi+(null!=e?"/"+e:"")},e}();function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}var c=function(){function e(){this.root={}}var t=e.prototype;return t.get=function(e){for(var t,i=this.root,n=f(e);!(t=n()).done;){if(!i.children)return[];var r=i.children.get(t.value);if(!r)return[];i=r}return i.values||[]},t.set=function(e,t){for(var i,n=this.root,r=f(e);!(i=r()).done;){var o=i.value;n.children||(n.children=new Map);var a=n.children.get(o);a||n.children.set(o,a={}),n=a}n.values?n.values.push(t):n.values=[t]},t.allPrefixes=function(e){for(var t=[],i=this.root,n=0;n<e.length&&i.children;n++){var r=i.children.get(e[n]);if(!r)break;r.values&&r.values.length&&t.push([r.values,e.slice(n+1)]),i=r}return t},e}();function l(e){if(e<"ㄱ"||"ㅎ"<e)return e;var t=["ㄸ","ㅃ","ㅉ"];if(-1!==t.indexOf(e[0]))return e;var i=e.charCodeAt(0)-"ㄱ".charCodeAt(0);return t.forEach(function(t){return i-=e>t?1:0}),String.fromCharCode(i+4520)}function d(e){return e.split("").map(l).join("").normalize("NFD")}e.Analyzer=function(){function e(e,t){var i=this;this.yongeons=new c,e.forEach(function(e){return i.addYongeon(e)}),this.eomis=new Map,t.forEach(function(e){return i.addEomi(e)})}var t=e.prototype;return t.addYongeon=function(e){var t="ㄹ"!==e.batchim&&void 0;this.yongeons.set(d(e.hada),{yongeon:e,eomiType:"",dropRieul:t}),this.yongeons.set(d(e.hae),{yongeon:e,eomiType:"(아/어)"}),this.yongeons.set(d(e.hamyeon),{yongeon:e,eomiType:"(으)",dropRieul:t}),"ㄹ"===e.batchim&&(this.yongeons.set(d(e.hani),{yongeon:e,eomiType:"",dropRieul:!0}),this.yongeons.set(d(e.hani),{yongeon:e,eomiType:"(으)",dropRieul:!0}))},t.addEomi=function(e){this.addEomiUnit(d(e.eomi.body),{eomi:e,eomiType:e.eomi.eomiType,dropRieul:e.eomi.dropRieul}),e.eomiAfterBatchim&&this.addEomiUnit(d(e.eomiAfterBatchim.body),{eomi:e,eomiType:e.eomiAfterBatchim.eomiType,dropRieul:e.eomiAfterBatchim.dropRieul})},t.addEomiUnit=function(e,t){var i=this.eomis.get(e);i?i.push(t):this.eomis.set(e,[t])},t.analyze=function(e){for(var t,i=[],n=f(this.yongeons.allPrefixes(d(e)));!(t=n()).done;)for(var r,o=t.value,a=o[0],h=f(this.eomis.get(o[1])||[]);!(r=h()).done;)for(var s,u=r.value,c=u.eomi,l=u.eomiType,m=u.dropRieul,y=f(a);!(s=y()).done;){var p=s.value;l===p.eomiType&&(null!=p.dropRieul&&m!==p.dropRieul||i.push([p.yongeon,c]))}return i},e}(),e.E=s,e.Eomi=s,e.V=a,e.Yongeon=a});
//# sourceMappingURL=eomi.umd.js.map
